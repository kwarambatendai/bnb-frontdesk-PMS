$('.adder').on('click', function() {
    var LineNumber = $('#Invoice').data('lastrowadded') + 1;
    var firstInvoiceLine = $('#Invoice').find('.InvoiceLine.row').first();
    var newInvoiceLine = firstInvoiceLine.clone(true);
    newInvoiceLine.find('.InvoiceLine.row').data('linenumber', LineNumber);
    // fix up the id and name
    newInvoiceLine.find('input[type=text]').each(function() {
        var previd = $(this).attr('id');
        var prevname = $(this).attr('name');
        $(this).attr('id', previd + LineNumber)
            .attr('name', prevname + LineNumber); // keep this sequence
    });
    newInvoiceLine.find('.delete_row').show().text("X " + LineNumber);
    $('#Invoice').append(newInvoiceLine);
    $('#Invoice').data('lastrowadded', LineNumber); //update the base number
});
$('.deleter').on('click', function() {
    $(this).parents('.Invoice.row').remove();
});
$('.deleter').first().hide();
$('#Invoice').on("keyup", ".ItemFields", function() {
    // var LineNumber = parseInt($(this).closest('.Invoice.row').data('linenumber');
    var activeLine = $(this).closest('.Invoice');

    activeLine.find('input[id^="VATPrice"]').val((0.21 * parseInt(activeLine.find('input[id^="NetPrice"]').val(), 10)) + parseInt(activeLine.find('input[id^="NetPrice"]').val(), 10));
    activeLine.find('input[id^="TotalPrice"]').val(parseInt(activeLine.find('input[id^="Quantity"]').val(), 10) * parseInt(activeLine.find('input[id^="VATPrice"]').val(), 10));

});